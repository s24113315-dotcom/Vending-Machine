<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>iPhone Vending Machine</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      background: linear-gradient(135deg, #000000, #1a1a1a);
      color: #fff;
      text-align: center;
      padding: 30px;
    }
    .machine {
      background-color: #111;
      padding: 25px;
      border-radius: 15px;
      max-width: 700px;
      margin: auto;
      box-shadow: 0 0 25px rgba(0,255,255,0.2);
      border: 2px solid #00ffff;
    }
    h2 {
      color: #00ffff;
      text-shadow: 0 0 10px #00ffff;
    }
    .section {
      margin-bottom: 25px;
    }
    .button-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
    }
    .item-button, .accessory-button, .money-button, .storage-button {
      background-color: #222;
      color: #fff;
      border: 2px solid #555;
      border-radius: 10px;
      padding: 12px 18px;
      cursor: pointer;
      width: 200px;
      transition: all 0.3s ease;
      box-shadow: 0 0 5px rgba(255,255,255,0.1);
    }
    .item-button:hover {
      background-color: #4b0082;
      box-shadow: 0 0 10px #4b0082;
    }
    .accessory-button:hover {
      background-color: #008080;
      box-shadow: 0 0 10px #00cccc;
    }
    .money-button:hover {
      background-color: #556b2f;
      box-shadow: 0 0 10px #7fff00;
    }
    .storage-button:hover {
      background-color: #444;
      box-shadow: 0 0 10px #888;
    }
    .selected {
      border-color: #00ffff !important;
      box-shadow: 0 0 15px #00ffff;
    }
    button.purchase {
      background-color: #00ffff;
      color: #000;
      padding: 14px 24px;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 0 10px #00ffff;
      transition: background 0.3s ease;
    }
    button.purchase:hover {
      background-color: #00cccc;
    }
    #inserted-amount {
      font-size: 24px;
      color: #00ff99;
      text-shadow: 0 0 8px #00ff99;
    }
    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 18px;
      color: #ffcc00;
      text-shadow: 0 0 5px #ffcc00;
    }
  </style>
</head>
<body>

<div class="machine">
  <h2>ðŸ“± iPhone Vending Machine</h2>

  <div class="section">
    <h3>Select iPhone Model</h3>
    <div class="button-grid" id="phone-buttons"></div>
  </div>

  <div class="section">
    <h3>Select Storage</h3>
    <div class="button-grid" id="storage-buttons"></div>
  </div>

  <div class="section">
    <h3>Select Accessories</h3>
    <div class="button-grid" id="accessory-buttons"></div>
  </div>

  <div class="section">
    <h3>Insert NTD</h3>
    <div class="button-grid" id="money-buttons"></div>
    <p>Total Inserted: <strong id="inserted-amount">NT$0</strong></p>
  </div>

  <button class="purchase" onclick="purchase()">Buy</button>
  <p id="result"></p>
</div>

<script>
  const phones = [
    { name: "None", basePrice: 0 },
    { name: "iPhone 15", basePrice: 32900 },
    { name: "iPhone 15 Pro", basePrice: 35900 },
    { name: "iPhone 15 Pro Max", basePrice: 38900 },
    { name: "iPhone 16", basePrice: 35900 },
    { name: "iPhone 16 Pro", basePrice: 38900 },
    { name: "iPhone 16 Pro Max", basePrice: 41900 },
    { name: "iPhone 17", basePrice: 38900 },
    { name: "iPhone 17 Pro", basePrice: 41900 },
    { name: "iPhone 17 Pro Max", basePrice: 44900 }
  ];

  const storageOptions = [
    { size: "128GB", price: 0 },
    { size: "256GB", price: 2000 },
    { size: "512GB", price: 4000 },
    { size: "1TB", price: 6000 },
    { size: "2TB", price: 9000 }
  ];

  const accessories = [
    { name: "Wireless Charger", price: 1200 },
    { name: "Phone Case", price: 800 },
    { name: "Earbuds", price: 2500 },
    { name: "Power Bank", price: 1500 },
    { name: "Bluetooth Speaker", price: 1200 },
    { name: "Charger Adapter", price: 600 },
    { name: "Type C charger cord", price: 300 }
  ];

  const denominations = [2000, 1000, 500, 200, 100, 50, 10, 5, 1];

  let selectedPhone = phones[0];
  let selectedStorage = storageOptions[0];
  let selectedAccessories = [];
  let insertedAmount = 0;

  function createButtons(items, containerId, type) {
    const container = document.getElementById(containerId);
    items.forEach((item, index) => {
      const btn = document.createElement("button");
      if (type === "phone") {
        btn.className = "item-button";
        btn.textContent = `${item.name} - NT$${item.basePrice}`;
        btn.onclick = () => {
          selectedPhone = item;
          highlightSelection(containerId, index);
        };
      } else if (type === "storage") {
        btn.className = "storage-button";
        btn.textContent = `${item.size} +NT$${item.price}`;
        btn.onclick = () => {
          selectedStorage = item;
          highlightSelection(containerId, index);
        };
      } else if (type === "accessory") {
        btn.className = "accessory-button";
        btn.textContent = `${item.name} - NT$${item.price}`;
        btn.onclick = () => {
          const alreadySelected = selectedAccessories.includes(item);
          if (alreadySelected) {
            selectedAccessories = selectedAccessories.filter(a => a !== item);
            btn.classList.remove("selected");
          } else {
            selectedAccessories.push(item);
            btn.classList.add("selected");
          }
        };
      }
      container.appendChild(btn);
    });
  }

  function createMoneyButtons() {
    const container = document.getElementById("money-buttons");
    denominations.forEach(value => {
      const btn = document.createElement("button");
      btn.className = "money-button";
      btn.textContent = `NT$${value}`;
      btn.onclick = () => {
        insertedAmount += value;
        document.getElementById("inserted-amount").textContent = `NT$${insertedAmount}`;
      };
      container.appendChild(btn);
    });
  }

  function highlightSelection(containerId, selectedIndex) {
    const buttons = document.getElementById(containerId).children;
    for (let i = 0; i < buttons.length; i++) {
      buttons[i].classList.remove("selected");
    }
    buttons[selectedIndex].classList.add("selected");
  }

  function purchase() {
    const result = document.getElementById("result");
    const accessoriesTotal = selectedAccessories.reduce((sum, a) => sum + a.price, 0);
    const total = selectedPhone.basePrice + selectedStorage.price + accessoriesTotal;

    if (insertedAmount >= total) {
      const change = insertedAmount - total;
      const accessoryNames = selectedAccessories.length > 0
             ? selectedAccessories.map(a => a.name).join(", ")
      : "None";
      result.textContent = `âœ… You bought a ${selectedPhone.name} with ${selectedStorage.size} and accessories: ${accessoryNames}. Change: NT$${change}`;
      insertedAmount = 0;
      selectedAccessories = [];
      document.getElementById("inserted-amount").textContent = `NT$0`;
      document.querySelectorAll(".accessory-button").forEach(btn => btn.classList.remove("selected"));
    } else {
      result.textContent = `âŒ Not enough money. Total cost is NT$${total}.`;
    }
  }

  window.onload = () => {
    createButtons(phones, "phone-buttons", "phone");
    createButtons(storageOptions, "storage-buttons", "storage");
    createButtons(accessories, "accessory-buttons", "accessory");
    createMoneyButtons();
  };
</script>
</body>
</html>
